{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/circle/circle.component.ts","webpack:///src/app/circle/circle.component.svg","webpack:///src/app/circle/circle.model.ts","webpack:///src/app/rect/rect.component.ts","webpack:///src/app/rect/rect.component.svg","webpack:///src/app/rect/rect.model.ts","webpack:///src/app/shared/chain-comparer.ts","webpack:///src/app/shared/shape.component.ts","webpack:///src/app/shared/shape.model.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AppComponent","shapes","x","y","forEach","s","isHovered","pipe","subscribe","updateOrder","isDragged","find","value","sort","a","b","compareBy","shape","evaluate","mouseMove","next","selector","templateUrl","styleUrls","AppModule","declarations","imports","providers","bootstrap","CircleComponent","model","Circle","position","type","RectComponent","Rect","ChainComparer","getTarget","result","previous","ShapeComponent","lastMousePosition","shouldInitialize","subscription","mousePosition","onMove","unsubscribe","Shape","environment","production","bootstrapModule","err","console","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, HostListener } from '@angular/core';\nimport { Circle } from './circle/circle.model';\nimport { Rect } from \"./rect/rect.model\";\nimport { Shape } from \"./shared/shape.model\";\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { ChainComparer } from './shared/chain-comparer';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n    shapes: Shape[] = [\n        new Circle({ x: 50, y: 50 }),\n        new Circle({ x: 100, y: 150 }),\n        new Circle({ x: 150, y: 50 }),\n        new Circle({ x: 200, y: 200 }),\n        new Rect({ x: 250, y: 50 }),\n        new Rect({ x: 300, y: 160 }),\n        new Rect({ x: 360, y: 50 }),\n        new Rect({ x: 450, y: 200 }),\n    ];\n\n    constructor() {\n        this.shapes.forEach(s => {\n            s.isHovered.pipe(distinctUntilChanged()).subscribe(() => this.updateOrder());\n            s.isDragged.pipe(distinctUntilChanged()).subscribe(() => this.updateOrder());\n        })\n    }\n\n    public updateOrder() {\n        if (this.shapes.find(s => s.isDragged.value)) return;\n\n        this.shapes = this.shapes.sort((a, b) => new ChainComparer<Shape>(a, b)\n            .compareBy((shape) => shape.isHovered.value)\n            .compareBy((shape) => shape.x.value)\n            .compareBy((shape) => shape.y.value)\n            .evaluate());\n    }\n\n    @HostListener('mousemove', ['$event'])\n    onmove(e: MouseEvent) {\n        this.shapes.find(s => s.isDragged.value)?.mouseMove.next({ x: e.x, y: e.y });\n    }\n\n    @HostListener('mouseleave', ['$event'])\n    @HostListener('mouseup', ['$event'])\n    onup(e: MouseEvent) {\n        this.shapes.find(s => s.isDragged.value)?.isDragged.next(false);\n    }\n}\n\n\n","<div class=\"root\">\n  <svg style=\"width:100%; height:100%;\">\n    <g *ngFor=\"let shape of shapes\">\n      <g *ngIf=\"shape.type === 'circle'\" app-circle [model]=\"shape\" />\n      <g *ngIf=\"shape.type === 'rect'\" app-rect [model]=\"shape\" />\n    </g>\n  </svg>\n</div>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { CommonModule } from '@angular/common';\nimport { CircleComponent } from './circle/circle.component';\nimport { RectComponent } from \"./rect/rect.component\";\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    CircleComponent,\n    RectComponent,\n  ],\n  imports: [\n    CommonModule,\n    BrowserModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, EventEmitter, SimpleChanges } from '@angular/core';\nimport { ShapeComponent } from '../shared/shape.component';\n\n@Component({\n  selector: '[app-circle]',\n  templateUrl: './circle.component.svg',\n  styleUrls: ['./circle.component.css']\n})\nexport class CircleComponent extends ShapeComponent {\n}\n\n\n","<svg:g>\n    <svg:circle \n        [attr.cx]=\"model.x.value + 25\" \n        [attr.cy]=\"model.y.value + 25\" \n        r=\"25\" \n        [class.hovered]=\"model.isHovered.value\"\n        [class.pressed]=\"model.isDragged.value\"\n    ></svg:circle>\n    <svg:circle \n        [attr.cx]=\"model.x.value + 75\" \n        [attr.cy]=\"model.y.value + 25\" \n        r=\"25\" \n        [class.hovered]=\"model.isHovered.value\"\n        [class.pressed]=\"model.isDragged.value\"\n    ></svg:circle>\n    <svg:circle \n        [attr.cx]=\"model.x.value + 25\" \n        [attr.cy]=\"model.y.value + 75\" \n        r=\"25\" \n        [class.hovered]=\"model.isHovered.value\"\n        [class.pressed]=\"model.isDragged.value\"\n    ></svg:circle>\n    <svg:circle \n        [attr.cx]=\"model.x.value + 75\" \n        [attr.cy]=\"model.y.value + 75\" \n        r=\"25\" \n        [class.hovered]=\"model.isHovered.value\"\n        [class.pressed]=\"model.isDragged.value\"\n    ></svg:circle>\n    <svg:rect \n        class=\"overlay\"\n        [attr.x]=\"model.x.value\" \n        [attr.y]=\"model.y.value\" \n        width=\"100\"\n        height=\"100\"\n        (mouseover)=\"model.isHovered.next(true)\" \n        (mouseout)=\"model.isHovered.next(false)\"\n        (mousedown)=\"model.isDragged.next(true)\" \n        (mousedown)=\"lastMousePosition={x:$event.x, y:$event.y}\" \n        (mouseup)=\"model.isDragged.next(false)\"></svg:rect>\n\n</svg:g>","import { Vect } from '../shared/vect';\nimport { Shape } from '../shared/shape.model';\n\nexport class Circle extends Shape {\n    type = \"circle\"\n    constructor(position: Vect) {\n        super(position);\n    }\n}\n","import { Component } from '@angular/core';\nimport { ShapeComponent } from \"../shared/shape.component\";\n\n@Component({\n  selector: '[app-rect]',\n  templateUrl: './rect.component.svg',\n  styleUrls: ['./rect.component.css']\n})\nexport class RectComponent extends ShapeComponent {\n}\n","<svg:g>\n    <svg:rect \n        [attr.x]=\"model.x.value\" \n        [attr.y]=\"model.y.value\" \n        width=\"45\"\n        height=\"45\"\n        [class.hovered]=\"model.isHovered.value\"\n        [class.pressed]=\"model.isDragged.value\"\n    ></svg:rect>\n    <svg:rect \n        [attr.x]=\"model.x.value + 55\" \n        [attr.y]=\"model.y.value\" \n        width=\"45\"\n        height=\"45\"\n        [class.hovered]=\"model.isHovered.value\"\n        [class.pressed]=\"model.isDragged.value\"\n    ></svg:rect>\n    <svg:rect \n        [attr.x]=\"model.x.value\" \n        [attr.y]=\"model.y.value + 55\" \n        width=\"45\"\n        height=\"45\"\n        [class.hovered]=\"model.isHovered.value\"\n        [class.pressed]=\"model.isDragged.value\"\n    ></svg:rect>\n    <svg:rect \n        [attr.x]=\"model.x.value + 55\" \n        [attr.y]=\"model.y.value + 55\" \n        width=\"45\"\n        height=\"45\"\n        [class.hovered]=\"model.isHovered.value\"\n        [class.pressed]=\"model.isDragged.value\"\n    ></svg:rect>\n    <svg:rect \n        class=\"overlay\"\n        [attr.x]=\"model.x.value\" \n        [attr.y]=\"model.y.value\" \n        width=\"100\"\n        height=\"100\"\n        (mouseover)=\"model.isHovered.next(true)\" \n        (mouseout)=\"model.isHovered.next(false)\"\n        (mousedown)=\"model.isDragged.next(true)\" \n        (mousedown)=\"lastMousePosition={x:$event.x, y:$event.y}\" \n        (mouseup)=\"model.isDragged.next(false)\"></svg:rect>\n</svg:g>","import { Vect } from '../shared/vect';\nimport { Shape } from '../shared/shape.model';\nexport class Rect extends Shape {\n    type = \"rect\";\n    constructor(position: Vect) {\n        super(position);\n    }\n}\n","export class ChainComparer<T> {\n    private getTarget: (T) => unknown;\n    private previous: ChainComparer<T>;\n    constructor(private a: T, private b: T) {\n    }\n\n    compareBy(getTarget: (T) => unknown) {\n        let result = new ChainComparer<T>(this.a, this.b);\n        result.getTarget = getTarget;\n        result.previous = this;\n        return result;\n    }\n\n    evaluate(): number {\n        const previous = this.previous?.evaluate();\n        if (!!previous)\n            return previous;\n\n        if (!!this.getTarget) {\n            if (this.getTarget(this.a) < this.getTarget(this.b))\n                return -1;\n            if (this.getTarget(this.a) > this.getTarget(this.b))\n                return 1;\n        }\n        return 0;\n    }\n}\n","import { Input, OnDestroy, OnChanges } from '@angular/core';\nimport { Shape } from \"./shape.model\";\nimport { Subscription } from 'rxjs';\nimport { Vect } from './vect';\n\nexport abstract class ShapeComponent implements OnDestroy, OnChanges {\n  @Input() model!: Shape;\n\n  lastMousePosition: Vect = { x: 0, y: 0 };\n  private subscription: Subscription;\n\n  ngOnChanges(): void {\n    const shouldInitialize = !this.subscription || !!this.model;\n    if (shouldInitialize) {\n\n      this.subscription = this.model.mouseMove.subscribe(mousePosition => this.onMove(mousePosition));\n    }\n  }\n\n  onMove(mousePosition: Vect) {\n    this.model.x.next(this.model.x.value + mousePosition.x - this.lastMousePosition.x);\n    this.model.y.next(this.model.y.value + mousePosition.y - this.lastMousePosition.y);\n    this.lastMousePosition = mousePosition;\n  }\n\n  ngOnDestroy(): void {\n    this.subscription?.unsubscribe();\n  }\n}\n","import { Vect } from './vect';\nimport { BehaviorSubject } from 'rxjs';\n\nexport abstract class Shape {\n    abstract type: string;\n    x = new BehaviorSubject<number>(0);\n    y = new BehaviorSubject<number>(0);\n    isHovered = new BehaviorSubject<boolean>(false);\n    isDragged = new BehaviorSubject<boolean>(false);\n    mouseMove = new BehaviorSubject<Vect>({ x: 0, y: 0 });\n\n    constructor(position: Vect) {\n        this.x.next(position.x);\n        this.y.next(position.y);\n    }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}